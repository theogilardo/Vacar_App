<div class="container">
  <div class="row">
    <div class="d-flex profile-container justify-content-center">

      <!-- user profile harcoded for now -->

      <div class="manage-cars ">
        <div class="d-flex justify-content-between">
          <%= link_to "List your own car", dashboard_owner_path(@user), class: "btn btn-primary" %>
          <%= link_to "Rent a car", cars_path(request), class: "btn btn-primary" %>
        </div>
        <h3>Your Rent Requests</h3>
        <% @requests.each do |request|%>
        <div class="">
          <%= cl_image_tag request.car.photo.attached? ? request.car.photo.key : "injcuuecln8fvf2vo2zg", width: 500, height: 350, crop: :fill, :cloud_name => "dir0nw4ok"%>
          <div class="card-product-infos">
            <h2><%= request.car.brand %></h2>
            <p><%= request.pick_up_date %></p>
            <p><%= request.drop_off_date %></p>
            <p><%= request.status %></p>
            <%= link_to "delete request", destroy_request_path(request), method: :delete, class: "delete-btn btn btn-primary btn-sm" %>
          </div>
        </div>
        <% end %>
      </div>

      <div class="profile-card">
        <div>
          <h3>Personal Info</h3>
          <p><%= @user.first_name %> <%=@user.last_name %></p>
          <img class="avatar-large" alt="avatar" src="https://kitt.lewagon.com/placeholder/users/ssaunier" />
        </div>
        <div class="profile-content">
          <p>"I travel for business a couple times a month, and I appreciate the possibility to park my car at the airport hussle-free while making some money when I am away."</p>
          <p>Home Location: Amsterdam</p>
        </div>
      </div>

    </div>
  </div>
</div>

<div class="container">
  <div class="">
    <div class="d-flex requests-container justify-content-center">

      <h3> Previous bookings</h3>
      <% @requests.where("status = ? AND drop_off_date < ?", "accepted", Date.today ).each do |request|%>
      <div class="card-product">
        <%= cl_image_tag request.car.photo.attached? ? request.car.photo.key : "injcuuecln8fvf2vo2zg", width: 500, height: 350, crop: :fill, :cloud_name => "dir0nw4ok"%>
        <div class="card-product-infos">
          <h2><%= request.car.brand %></h2>
          <p><%= request.pick_up_date %></p>
          <p><%= request.drop_off_date %></p>
          <%= link_to "review", new_request_review_path(request),  class: "review-btn btn btn-primary btn-sm" %>
        </div>
      </div>
      <% end %>

    </div>
  </div>
</div>










<div class="container">
  <div class="row">
    <div class="col-6 offset-3">

      <%= link_to "List your own car", dashboard_owner_path(@user), class: "btn btn-primary btn-lg" %>

      <% @requests.each do |request|%>
      <div class="card-product">
        <%= cl_image_tag request.car.photo.attached? ? request.car.photo.key : "injcuuecln8fvf2vo2zg", width: 500, height: 350, crop: :fill, :cloud_name => "dir0nw4ok"%>
        <div class="card-product-infos">
          <h2><%= request.car.brand %></h2>
          <p><%= request.pick_up_date %></p>
          <p><%= request.drop_off_date %></p>
          <p><%= request.status %></p>
          <%= link_to "delete request", destroy_request_path(request), method: :delete, class: "delete-btn btn btn-primary btn-sm" %>
        </div>
      </div>
      <% end %>


      <h2> Previous bookings</h2>
      <% @requests.where("status = ? AND drop_off_date < ?", "accepted", Date.today ).each do |request|%>
      <div class="card-product">
        <%= cl_image_tag request.car.photo.attached? ? request.car.photo.key : "injcuuecln8fvf2vo2zg", width: 500, height: 350, crop: :fill, :cloud_name => "dir0nw4ok"%>
        <div class="card-product-infos">
          <h2><%= request.car.brand %></h2>
          <p><%= request.pick_up_date %></p>
          <p><%= request.drop_off_date %></p>
          <%= link_to "review", new_request_review_path(request),  class: "review-btn btn btn-primary btn-sm" %>
        </div>


      </div>
      <% end %>
      <%= link_to "Rent a car", cars_path(request), class: "btn btn-primary" %>

    </div>
  </div>
